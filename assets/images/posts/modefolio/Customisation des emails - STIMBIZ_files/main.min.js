"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}var Stepper=function(){function e(t){_classCallCheck(this,e),this.target=$(t),this.stepnb=this.target.children().length,this.butttonNextExiste=!1,this.butttonPrevExiste=!1,this.createSlider(),this.createCounterStep(),this.slideEventControl(),this.inputEventControl()}return _createClass(e,[{key:"createSlider",value:function(){this.target.slick({arrows:!1,dots:!1,infinite:!1,centerPadding:"0px",slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0,swipe:!1})}},{key:"createButtonNext",value:function(){this.nextButton=$('<div id="nextstep" class="btn btn-round btn-primary nextstep bounce-target">Etape suivante ></div>'),$("#stepscontrol").append(this.nextButton),this.nextButton.on("click",function(){this.target.slick("slickNext")}.bind(this)),this.butttonNextExiste=!0}},{key:"removeButtonNext",value:function(){this.nextButton.remove(),this.butttonNextExiste=!1}},{key:"createButtonPrev",value:function(){this.prevButton=$('<div class="btn btn-round btn-primary bounce-target"> < Etape precedente</div>'),$("#stepscontrol").prepend(this.prevButton),this.prevButton.on("click",function(){this.target.slick("slickPrev")}.bind(this))}},{key:"removeButtonPrev",value:function(){this.prevButton.remove()}},{key:"createCounterStep",value:function(){var t=this.target.slick("slickCurrentSlide")+1,e=this.target.find(" > div").length+1;this.counter=$('<span id="counter" class="text-primary">Etape <span class="current">'+t+'</span> / <span class="total">'+e+"</span></span>"),$("#countstep").append(this.counter)}},{key:"updateCurrentCounterStep",value:function(t){this.counter.find(".current").text(t)}},{key:"slideEventControl",value:function(){this.target.on("afterChange",function(){var t=this.target.slick("slickCurrentSlide")+1,e=this.target.find(" > div").length+1;this.inputEventControl(),e<=t&&this.removeButtonNext(),1<t&&this.createButtonPrev(),1===t&&(this.removeButtonPrev(),!1===this.butttonNextExiste&&this.createButtonNext()),this.updateCurrentCounterStep(t)}.bind(this))}},{key:"slideEventControlInit",value:function(){this.target.slick("slickCurrentSlide")}},{key:"inputEventControl",value:function(){var t=this.target.slick("slickCurrentSlide"),e=this.target.find('div[data-slick-index="'+t+'"]').find("input[required],select[requiredd]");e.keyup(function(){var s=[];e.each(function(t,e){""!=e.value?(s.push($(e).value),$(e).hasClass("pulse")&&$(e).removeClass("pulse")):$(e).addClass("pulse")}),s.length===e.length?!1===this.butttonNextExiste&&(this.stepnb===this.target.slick("slickCurrentSlide")+1||this.createButtonNext()):!0===this.butttonNextExiste&&this.removeButtonNext()}.bind(this))}}]),e}(),stepper=new Stepper("#steps"),SuperControl=function(){function t(){_classCallCheck(this,t),this.target=$('[data-provide="superControl"]'),this.item=$('[data-provide="superControl"]').children(),this.target&&this.start()}return _createClass(t,[{key:"formatE",value:function(){this.item.each(function(t,e){$(e).attr("superControl-item",t),$(e).on("click",function(t){this.item.attr("superControl-trigger",!1),$(t.currentTarget).attr("superControl-trigger",!0)}.bind(this))}.bind(this))}},{key:"start",value:function(){this.formatE()}}]),t}(),Rsloader=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"transparent",s=2<arguments.length&&void 0!==arguments[2]&&arguments[2];_classCallCheck(this,n),this.target=$(t),this.bg=e,this.flux=s,this.target&&this.start()}return _createClass(n,[{key:"start",value:function(){this.factorTarget()}},{key:"factorTarget",value:function(){this.target.css("position","relative")}},{key:"creatLoading",value:function(t){this.flux?this.loadingcontent='<div class="preloader-object obj-loader" style="position: static;background-color:'+this.bg+'!important;"><div class="loader-content"><svg version="1.1" class="hexa" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="227.7px" viewBox="0 0 200 227.7" style="enable-background:new 0 0 200 227.7;" xml:space="preserve"><g><path d="M100,0c-1.8,0-3.6,0.5-5.3,1.4L5.3,53C2,54.9,0,58.4,0,62.2v103.3c0,3.8,2,7.3,5.3,9.2l89.4,51.6c1.6,0.9,3.5,1.4,5.3,1.4s3.6-0.5,5.3-1.4l89.4-51.6c3.3-1.9,5.3-5.4,5.3-9.2V62.2c0-3.8-2-7.3-5.3-9.2L105.3,1.4C103.6,0.5,101.8,0,100,0L100,0z"></path></g></svg><svg version="1.1" class="hexa" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="227.7px" viewBox="0 0 200 227.7" style="enable-background:new 0 0 200 227.7;" xml:space="preserve"><g><path d="M100,0c-1.8,0-3.6,0.5-5.3,1.4L5.3,53C2,54.9,0,58.4,0,62.2v103.3c0,3.8,2,7.3,5.3,9.2l89.4,51.6c1.6,0.9,3.5,1.4,5.3,1.4s3.6-0.5,5.3-1.4l89.4-51.6c3.3-1.9,5.3-5.4,5.3-9.2V62.2c0-3.8-2-7.3-5.3-9.2L105.3,1.4C103.6,0.5,101.8,0,100,0L100,0z"></path></g></svg><svg version="1.1" class="hexa" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="227.7px" viewBox="0 0 200 227.7" style="enable-background:new 0 0 200 227.7;" xml:space="preserve"><g><path d="M100,0c-1.8,0-3.6,0.5-5.3,1.4L5.3,53C2,54.9,0,58.4,0,62.2v103.3c0,3.8,2,7.3,5.3,9.2l89.4,51.6c1.6,0.9,3.5,1.4,5.3,1.4s3.6-0.5,5.3-1.4l89.4-51.6c3.3-1.9,5.3-5.4,5.3-9.2V62.2c0-3.8-2-7.3-5.3-9.2L105.3,1.4C103.6,0.5,101.8,0,100,0L100,0z"></path></g></svg></div></div>':this.loadingcontent='<div class="preloader-object obj-loader" style="background-color:'+this.bg+'!important;"><div class="loader-content"><svg version="1.1" class="hexa" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="227.7px" viewBox="0 0 200 227.7" style="enable-background:new 0 0 200 227.7;" xml:space="preserve"><g><path d="M100,0c-1.8,0-3.6,0.5-5.3,1.4L5.3,53C2,54.9,0,58.4,0,62.2v103.3c0,3.8,2,7.3,5.3,9.2l89.4,51.6c1.6,0.9,3.5,1.4,5.3,1.4s3.6-0.5,5.3-1.4l89.4-51.6c3.3-1.9,5.3-5.4,5.3-9.2V62.2c0-3.8-2-7.3-5.3-9.2L105.3,1.4C103.6,0.5,101.8,0,100,0L100,0z"></path></g></svg><svg version="1.1" class="hexa" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="227.7px" viewBox="0 0 200 227.7" style="enable-background:new 0 0 200 227.7;" xml:space="preserve"><g><path d="M100,0c-1.8,0-3.6,0.5-5.3,1.4L5.3,53C2,54.9,0,58.4,0,62.2v103.3c0,3.8,2,7.3,5.3,9.2l89.4,51.6c1.6,0.9,3.5,1.4,5.3,1.4s3.6-0.5,5.3-1.4l89.4-51.6c3.3-1.9,5.3-5.4,5.3-9.2V62.2c0-3.8-2-7.3-5.3-9.2L105.3,1.4C103.6,0.5,101.8,0,100,0L100,0z"></path></g></svg><svg version="1.1" class="hexa" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="200px" height="227.7px" viewBox="0 0 200 227.7" style="enable-background:new 0 0 200 227.7;" xml:space="preserve"><g><path d="M100,0c-1.8,0-3.6,0.5-5.3,1.4L5.3,53C2,54.9,0,58.4,0,62.2v103.3c0,3.8,2,7.3,5.3,9.2l89.4,51.6c1.6,0.9,3.5,1.4,5.3,1.4s3.6-0.5,5.3-1.4l89.4-51.6c3.3-1.9,5.3-5.4,5.3-9.2V62.2c0-3.8-2-7.3-5.3-9.2L105.3,1.4C103.6,0.5,101.8,0,100,0L100,0z"></path></g></svg></div></div>',t.append(this.loadingcontent),this.target.attr("isLoading",!1)}},{key:"playloading",value:function(){this.creatLoading(this.target),this.target.attr("isLoading",!0)}},{key:"stoploading",value:function(){this.target.find(".preloader").remove(),this.target.attr("isLoading",!1)}}]),n}(),rsLoaderButton=function(){function s(t){_classCallCheck(this,s);var e={onTrigger:"click",color:"#fff",pulse:!1,manual:!1,dnone:!1};e=Object.assign(e,t),this.options=e,this.target=e.target,this.color=e.color,this.pulse=e.pulse,this.spinner='<div data-spinner="true" class="spinner d-flex justify-content-center align-items-center m-0" style="width: 20px; height: 25px;right: 0px; bottom: 0px;"><span class="spinner-circle " style="width: 20px;height: 20px;border-color:'+this.color+';border-top-color: transparent;"></span></div>',this.onTrigger=e.onTrigger,this.validate=!1,this.tmptext="",this.targetclass="",this.manual=e.manual,this.dnone=e.dnone,this.start(this.onTrigger)}return _createClass(s,[{key:"start",value:function(t){this.CreatEvent(t)}},{key:"CreatEvent",value:function(t){var s=this.pulse,n=this.spinner;this.validate;!1===this.manual&&$(document).on(this.onTrigger,this.target,function(t){t=t.currentTarget;this.targetclass=$(t).attr("class"),1==s&&$(t).addClass("pulse");var e='<span class="d-none text">'+$(t).html()+"</span>";$(t).html(n),$(t).append(e)}.bind(this))}},{key:"create",value:function(){var t=this.pulse,e=this.spinner;this.validate;this.targetclass=$(this.target).attr("class"),1==t&&$(this.target).addClass("pulse");var s='<span class="d-none text">'+$(this.target).html()+"</span>";$(this.target).html(e),$(this.target).append(s)}},{key:"loadvalidate",value:function(t){this.validate=t}},{key:"stopLoad",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"error";$(this.target).find(".spinner").remove(),$(this.target).find(".text").removeClass("d-none").addClass("d-block"),"default"===t&&$(this.target).attr("class",this.targetclass),"error"===t&&($(this.target).addClass("btn-danger"),$(this.target).addClass("animated"),$(this.target).addClass("rubberBand"),setTimeout(function(){$(this.target).removeClass("btn-danger"),$(this.target).removeClass("animated"),$(this.target).removeClass("rubberBand"),$(this.target).addClass(this.targetclass)}.bind(this),700)),"success"===t&&($(this.target).addClass("btn-success"),$(this.target).addClass("animated"),$(this.target).addClass("jello"),setTimeout(function(){$(this.target).removeClass("btn-success"),$(this.target).removeClass("animated"),$(this.target).removeClass("jello"),$(this.target).addClass(this.targetclass)}.bind(this),700)),1==this.pulse&&$(this.target).removeClass("pulse"),this.dnone}}]),s}(),tableRowSpinner=function(){function s(t,e){_classCallCheck(this,s),this.spinner='<div class="content-spinner"><div data-spinner="true" class="spinner d-flex justify-content-center align-items-center m-0" style="width: 20px; height: 25px;right: 0px; bottom: 0px;"><span class="spinner-circle " style="width: 20px;height: 20px;border-color:'+this.color+';border-top-color: transparent;"></span><</div>/div>',this.target=t,this.links=e}return _createClass(s,[{key:"creatEvent",value:function(){var t=this.target.find(links);$(document).on("click",t,function(t){t.preventDefault(),console.log("ok")})}}]),s}(),tableGlobalRowSpinner=new tableRowSpinner('[data-provide="rowspinner"]',[""]),inputSpinner=function(){function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:35,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:35;_classCallCheck(this,n),this.target=t,this.sizeh=e,this.sizew=s,this.spinner='<div data-spinner="true" class="spinner d-none position-absolute justify-content-center align-items-center m-0" style="width: '+this.sizew+"px; height: "+this.sizeh+'px;right: 0px; bottom: 0px;"><span class="spinner-circle " style="width: 20px;height: 20px;border-color:'+this.color+';border-top-color: transparent;"></span></div>',this.parent=$(this.target).closest("div"),this.create()}return _createClass(n,[{key:"create",value:function(){this.parent.addClass("position-relative").append(this.spinner),this.checkpadding()}},{key:"checkpadding",value:function(){this.parent.find(".spinner").css("right",parseInt(this.parent.css("padding-right")))}},{key:"startLoading",value:function(){this.parent.find(".spinner").hasClass("d-flex")||this.parent.find(".spinner").removeClass("d-none").addClass("d-flex")}},{key:"stopLoading",value:function(){this.parent.find(".spinner").hasClass("d-none")||this.parent.find(".spinner").removeClass("d-flex").addClass("d-none")}}]),n}(),inputError=function(){function s(t,e){_classCallCheck(this,s),this.target=t,this.parent=$(this.target).closest("div"),this.message=e,this.content='<div class="help-block with-errors"><ul class="list-unstyled"></ul></div>',this.formgroup=this.parent.closest(".form-group"),this.create(),this.hide()}return _createClass(s,[{key:"create",value:function(){this.parent.append(this.content),this.addmessage()}},{key:"formgroupstyle",value:function(t){!0===t?this.formgroup.addClass("has-error").addClass("has-danger"):this.formgroup.removeClass("has-error").removeClass("has-danger")}},{key:"addmessage",value:function(){this.parent.find(".with-errors").find(".list-unstyled").append("<li>"+this.message+"</li>")}},{key:"show",value:function(){this.formgroupstyle(!0),this.parent.find(".with-errors").hasClass("d-block")||this.parent.find(".with-errors").removeClass("d-none").addClass("d-block")}},{key:"hide",value:function(){this.formgroupstyle(!1),this.parent.find(".with-errors").hasClass("d-none")||this.parent.find(".with-errors").removeClass("d-block").addClass("d-none")}}]),s}(),rsloaderProvideButton=new rsLoaderButton({target:"[data-provide='buttonload']",pulse:!0}),rsloaderProvideButtonupload=new rsLoaderButton({target:"[data-provide='buttonloadupload']",pulse:!0,manual:!0,dnone:!0});window.colors={primary:"#3899ec",secondary:"#374351",third:"#f9bb30"};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiU3RlcHBlciIsInRhcmdldCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCIkIiwic3RlcG5iIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJidXR0dG9uTmV4dEV4aXN0ZSIsImJ1dHR0b25QcmV2RXhpc3RlIiwiY3JlYXRlU2xpZGVyIiwiY3JlYXRlQ291bnRlclN0ZXAiLCJzbGlkZUV2ZW50Q29udHJvbCIsImlucHV0RXZlbnRDb250cm9sIiwic2xpY2siLCJhcnJvd3MiLCJkb3RzIiwiaW5maW5pdGUiLCJjZW50ZXJQYWRkaW5nIiwic2xpZGVzVG9TaG93Iiwic2xpZGVzVG9TY3JvbGwiLCJhZGFwdGl2ZUhlaWdodCIsInN3aXBlIiwibmV4dEJ1dHRvbiIsImFwcGVuZCIsIm9uIiwiYmluZCIsInJlbW92ZSIsInByZXZCdXR0b24iLCJwcmVwZW5kIiwiY3VyZW50U3RlcCIsInRvdGFsU3RlcCIsImZpbmQiLCJjb3VudGVyIiwiY3VycmVudCIsInRleHQiLCJyZW1vdmVCdXR0b25OZXh0IiwiY3JlYXRlQnV0dG9uUHJldiIsInJlbW92ZUJ1dHRvblByZXYiLCJjcmVhdGVCdXR0b25OZXh0IiwidXBkYXRlQ3VycmVudENvdW50ZXJTdGVwIiwiY3VycmVudHN0ZXAiLCJjdXJyZW50SW51cHQiLCJrZXl1cCIsInJlc3VsdCIsImVhY2giLCJlIiwidCIsInZhbHVlIiwicHVzaCIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInN0ZXBwZXIiLCJTdXBlckNvbnRyb2wiLCJpdGVtIiwic3RhcnQiLCJrIiwiYXR0ciIsImN1cnJlbnRUYXJnZXQiLCJmb3JtYXRFIiwiUnNsb2FkZXIiLCJiZyIsImFyZ3VtZW50cyIsInVuZGVmaW5lZCIsImZsdXgiLCJmYWN0b3JUYXJnZXQiLCJjc3MiLCJjb25zb2xlIiwibG9nIiwibG9hZGluZ2NvbnRlbnQiLCJjcmVhdExvYWRpbmciLCJyc0xvYWRlckJ1dHRvbiIsInNldHRpbmdzIiwib3B0aW9ucyIsIm9uVHJpZ2dlciIsImNvbG9yIiwicHVsc2UiLCJtYW51YWwiLCJkbm9uZSIsIk9iamVjdCIsImFzc2lnbiIsInNwaW5uZXIiLCJ2YWxpZGF0ZSIsInRtcHRleHQiLCJ0YXJnZXRjbGFzcyIsIkNyZWF0RXZlbnQiLCJkb2N1bWVudCIsImNvbnRlbnR0ZXh0IiwiaHRtbCIsImFjdGlvbiIsInNldFRpbWVvdXQiLCJ0YWJsZVJvd1NwaW5uZXIiLCJsaW5rcyIsImxpbmtzdGFyZ2V0IiwicHJldmVudERlZmF1bHQiLCJ0YWJsZUdsb2JhbFJvd1NwaW5uZXIiLCJpbnB1dFNwaW5uZXIiLCJzaXplaCIsInNpemV3IiwicGFyZW50IiwiY2xvc2VzdCIsImNyZWF0ZSIsImNoZWNrcGFkZGluZyIsInBhcnNlSW50IiwiaW5wdXRFcnJvciIsIm1lc3NhZ2UiLCJjb250ZW50IiwiZm9ybWdyb3VwIiwiaGlkZSIsImFkZG1lc3NhZ2UiLCJib29sIiwiZm9ybWdyb3Vwc3R5bGUiLCJyc2xvYWRlclByb3ZpZGVCdXR0b24iLCJyc2xvYWRlclByb3ZpZGVCdXR0b251cGxvYWQiLCJ3aW5kb3ciLCJjb2xvcnMiLCJwcmltYXJ5Iiwic2Vjb25kYXJ5IiwidGhpcmQiXSwibWFwcGluZ3MiOiJ1WkFBTUEsbUJBQ0YsU0FBQUEsRUFBWUMsR0FBUUMsZ0JBQUFDLEtBQUFILEdBQ2hCRyxLQUFLRixPQUFTRyxFQUFFSCxHQUNoQkUsS0FBS0UsT0FBU0YsS0FBS0YsT0FBT0ssV0FBV0MsT0FDckNKLEtBQUtLLG1CQUFvQixFQUN6QkwsS0FBS00sbUJBQW9CLEVBQ3pCTixLQUFLTyxlQUNMUCxLQUFLUSxvQkFDTFIsS0FBS1Msb0JBQ0xULEtBQUtVLGdGQUlMVixLQUFLRixPQUFPYSxNQUFNLENBQ2RDLFFBQVEsRUFDUkMsTUFBTSxFQUNOQyxVQUFVLEVBQ1ZDLGNBQWUsTUFDZkMsYUFBYyxFQUNkQyxlQUFnQixFQUNoQkMsZ0JBQWdCLEVBQ2hCQyxPQUFPLCtDQVFYbkIsS0FBS29CLFdBQWFuQixFQUFF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UUFBVSw0RUFDZnhHLEtBQUt5RyxVQUFZekcsS0FBS2lHLE9BQU9DLFFBQVEsZUFDckNsRyxLQUFLbUcsU0FDTG5HLEtBQUswRyw2REFHTDFHLEtBQUtpRyxPQUFPNUUsT0FBT3JCLEtBQUt3RyxTQUN4QnhHLEtBQUsyRyxvREFFTUMsSUFDQyxJQUFUQSxFQUNDNUcsS0FBS3lHLFVBQVV4RCxTQUFTLGFBQWFBLFNBQVMsY0FFOUNqRCxLQUFLeUcsVUFBVXpELFlBQVksYUFBYUEsWUFBWSxtREFLeERoRCxLQUFLaUcsT0FBT3BFLEtBQUssZ0JBQWdCQSxLQUFLLGtCQUFrQlIsT0FBTyxPQUFPckIsS0FBS3VHLFFBQVEsd0NBSW5GdkcsS0FBSzZHLGdCQUFlLEdBQ2hCN0csS0FBS2lHLE9BQU9wRSxLQUFLLGdCQUFnQmtCLFNBQVMsWUFDMUMvQyxLQUFLaUcsT0FBT3BFLEtBQUssZ0JBQWdCbUIsWUFBWSxVQUFVQyxTQUFTLDBDQUlwRWpELEtBQUs2RyxnQkFBZSxHQUNoQjdHLEtBQUtpRyxPQUFPcEUsS0FBSyxnQkFBZ0JrQixTQUFTLFdBQzFDL0MsS0FBS2lHLE9BQU9wRSxLQUFLLGdCQUFnQm1CLFlBQVksV0FBV0MsU0FBUyxtQkFPekU2RCxzQkFBeUIsSUFBSXpDLGVBQzdCLENBQ0d2RSxPQUFRLDhCQUlQNEUsT0FBTSxJQUlWcUMsNEJBQStCLElBQUkxQyxlQUNuQyxDQUNJdkUsT0FBUSxvQ0FJUjRFLE9BQU0sRUFDTkMsUUFBTyxFQUNQQyxPQUFNLElBOENkb0MsT0FBT0MsT0FBUyxDQUNaQyxRQUFXLFVBQ1hDLFVBQWEsVUFDYkMsTUFBUSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFN0ZXBwZXIge1xuICAgIGNvbnN0cnVjdG9yKHRhcmdldCkge1xuICAgICAgICB0aGlzLnRhcmdldCA9ICQodGFyZ2V0KVxuICAgICAgICB0aGlzLnN0ZXBuYiA9IHRoaXMudGFyZ2V0LmNoaWxkcmVuKCkubGVuZ3RoXG4gICAgICAgIHRoaXMuYnV0dHRvbk5leHRFeGlzdGUgPSBmYWxzZVxuICAgICAgICB0aGlzLmJ1dHR0b25QcmV2RXhpc3RlID0gZmFsc2VcbiAgICAgICAgdGhpcy5jcmVhdGVTbGlkZXIoKVxuICAgICAgICB0aGlzLmNyZWF0ZUNvdW50ZXJTdGVwKClcbiAgICAgICAgdGhpcy5zbGlkZUV2ZW50Q29udHJvbCgpXG4gICAgICAgIHRoaXMuaW5wdXRFdmVudENvbnRyb2woKVxuICAgIH1cblxuICAgIGNyZWF0ZVNsaWRlcigpIHtcbiAgICAgICAgdGhpcy50YXJnZXQuc2xpY2soe1xuICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgICAgICAgIGRvdHM6IGZhbHNlLFxuICAgICAgICAgICAgaW5maW5pdGU6IGZhbHNlLFxuICAgICAgICAgICAgY2VudGVyUGFkZGluZzogJzBweCcsXG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgICAgICAgICAgIGFkYXB0aXZlSGVpZ2h0OiB0cnVlLFxuICAgICAgICAgICAgc3dpcGU6IGZhbHNlLFxuICAgICAgICB9KVxuICAgIH1cblxuICAgIC8vLy8vLy8vLy8vLy8vLy9cbiAgICAvL2J1dHRvbiBjb250cm9sXG4gICAgLy8vLy8vLy8vLy8vLy8vLy9cbiAgICBjcmVhdGVCdXR0b25OZXh0KCkge1xuICAgICAgICB0aGlzLm5leHRCdXR0b24gPSAkKCc8ZGl2IGlkPVwibmV4dHN0ZXBcIiBjbGFzcz1cImJ0biBidG4tcm91bmQgYnRuLXByaW1hcnkgbmV4dHN0ZXAgYm91bmNlLXRhcmdldFwiPkV0YXBlIHN1aXZhbnRlID48L2Rpdj4nKVxuICAgICAgICAkKCcjc3RlcHNjb250cm9sJykuYXBwZW5kKHRoaXMubmV4dEJ1dHRvbilcbiAgICAgICAgdGhpcy5uZXh0QnV0dG9uLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQuc2xpY2soJ3NsaWNrTmV4dCcpXG4gICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgdGhpcy5idXR0dG9uTmV4dEV4aXN0ZSA9IHRydWU7XG4gICAgfVxuXG4gICAgcmVtb3ZlQnV0dG9uTmV4dCgpIHtcbiAgICAgICAgdGhpcy5uZXh0QnV0dG9uLnJlbW92ZSgpXG4gICAgICAgIHRoaXMuYnV0dHRvbk5leHRFeGlzdGUgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBjcmVhdGVCdXR0b25QcmV2KCkge1xuICAgICAgICB0aGlzLnByZXZCdXR0b24gPSAkKCc8ZGl2IGNsYXNzPVwiYnRuIGJ0bi1yb3VuZCBidG4tcHJpbWFyeSBib3VuY2UtdGFyZ2V0XCI+IDwgRXRhcGUgcHJlY2VkZW50ZTwvZGl2PicpXG4gICAgICAgICQoJyNzdGVwc2NvbnRyb2wnKS5wcmVwZW5kKHRoaXMucHJldkJ1dHRvbilcbiAgICAgICAgdGhpcy5wcmV2QnV0dG9uLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQuc2xpY2soJ3NsaWNrUHJldicpXG4gICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICB9XG5cbiAgICByZW1vdmVCdXR0b25QcmV2KCkge1xuICAgICAgICB0aGlzLnByZXZCdXR0b24ucmVtb3ZlKClcbiAgICB9XG5cbiAgICAvLy8vLy8vLy8vLy8vLy9cbiAgICAvL2NvdW50ZXIgc3RlcFxuICAgIC8vLy8vLy8vLy8vLy8vXG4gICAgY3JlYXRlQ291bnRlclN0ZXAoKSB7XG4gICAgICAgIHZhciBjdXJlbnRTdGVwID0gdGhpcy50YXJnZXQuc2xpY2soJ3NsaWNrQ3VycmVudFNsaWRlJykgKyAxO1xuICAgICAgICB2YXIgdG90YWxTdGVwID0gdGhpcy50YXJnZXQuZmluZCgnID4gZGl2JykubGVuZ3RoICsgMTtcbiAgICAgICAgdGhpcy5jb3VudGVyID0gJCgnPHNwYW4gaWQ9XCJjb3VudGVyXCIgY2xhc3M9XCJ0ZXh0LXByaW1hcnlcIj5FdGFwZSA8c3BhbiBjbGFzcz1cImN1cnJlbnRcIj4nICsgY3VyZW50U3RlcCArICc8L3NwYW4+IC8gPHNwYW4gY2xhc3M9XCJ0b3RhbFwiPicgKyB0b3RhbFN0ZXAgKyAnPC9zcGFuPjwvc3Bhbj4nKVxuICAgICAgICAkKCcjY291bnRzdGVwJykuYXBwZW5kKHRoaXMuY291bnRlcilcbiAgICB9XG5cbiAgICB1cGRhdGVDdXJyZW50Q291bnRlclN0ZXAoY3VycmVudCkge1xuICAgICAgICB0aGlzLmNvdW50ZXIuZmluZCgnLmN1cnJlbnQnKS50ZXh0KGN1cnJlbnQpXG4gICAgfVxuXG4gICAgLy8vLy8vLy8vLy8vLy8vXG4gICAgLy9ldmVudCBjb250cm9sXG4gICAgLy8vLy8vLy8vLy8vLy8vXG4gICAgc2xpZGVFdmVudENvbnRyb2woKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0Lm9uKCdhZnRlckNoYW5nZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjdXJlbnRTdGVwID0gdGhpcy50YXJnZXQuc2xpY2soJ3NsaWNrQ3VycmVudFNsaWRlJykgKyAxO1xuICAgICAgICAgICAgdmFyIHRvdGFsU3RlcCA9IHRoaXMudGFyZ2V0LmZpbmQoJyA+IGRpdicpLmxlbmd0aCArIDE7XG4gICAgICAgICAgICB0aGlzLmlucHV0RXZlbnRDb250cm9sKClcbiAgICAgICAgICAgIGlmIChjdXJlbnRTdGVwID49IHRvdGFsU3RlcCkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQnV0dG9uTmV4dCgpXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjdXJlbnRTdGVwID4gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uUHJldigpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VyZW50U3RlcCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQnV0dG9uUHJldigpXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYnV0dHRvbk5leHRFeGlzdGUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uTmV4dCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8vLyBjdXJyZW50IHN0ZXBcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ3VycmVudENvdW50ZXJTdGVwKGN1cmVudFN0ZXApXG5cbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgIH1cblxuICAgIHNsaWRlRXZlbnRDb250cm9sSW5pdCgpIHtcbiAgICAgICAgdmFyIGN1cmVudFN0ZXAgPSB0aGlzLnRhcmdldC5zbGljaygnc2xpY2tDdXJyZW50U2xpZGUnKSArIDE7XG4gICAgfVxuXG4gICAgaW5wdXRFdmVudENvbnRyb2woKSB7XG4gICAgICAgIHZhciBjdXJyZW50c3RlcCA9IHRoaXMudGFyZ2V0LnNsaWNrKCdzbGlja0N1cnJlbnRTbGlkZScpO1xuICAgICAgICB2YXIgY3VycmVudEludXB0ID0gdGhpcy50YXJnZXQuZmluZCgnZGl2W2RhdGEtc2xpY2staW5kZXg9XCInICsgY3VycmVudHN0ZXAgKyAnXCJdJykuZmluZCgnaW5wdXRbcmVxdWlyZWRdLHNlbGVjdFtyZXF1aXJlZGRdJylcbiAgICAgICAgY3VycmVudEludXB0LmtleXVwKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBbXVxuICAgICAgICAgICAgY3VycmVudEludXB0LmVhY2goZnVuY3Rpb24gKGUsIHQpIHtcbiAgICAgICAgICAgICAgICBpZiAodC52YWx1ZSAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKCQodCkudmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHQpLmhhc0NsYXNzKFwicHVsc2VcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQodCkucmVtb3ZlQ2xhc3MoJ3B1bHNlJylcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICQodCkuYWRkQ2xhc3MoJ3B1bHNlJylcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA9PT0gY3VycmVudEludXB0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmJ1dHR0b25OZXh0RXhpc3RlID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdGVwbmIgPT09ICh0aGlzLnRhcmdldC5zbGljaygnc2xpY2tDdXJyZW50U2xpZGUnKSArIDEpKSB7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3JlYXRlQnV0dG9uTmV4dCgpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5idXR0dG9uTmV4dEV4aXN0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUJ1dHRvbk5leHQoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuXG5cbiAgICB9XG59XG5jb25zdCBzdGVwcGVyID0gbmV3IFN0ZXBwZXIoJyNzdGVwcycpO1xuY2xhc3MgU3VwZXJDb250cm9sIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSAkKCdbZGF0YS1wcm92aWRlPVwic3VwZXJDb250cm9sXCJdJylcbiAgICAgICAgdGhpcy5pdGVtID0gJCgnW2RhdGEtcHJvdmlkZT1cInN1cGVyQ29udHJvbFwiXScpLmNoaWxkcmVuKClcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0KVxuICAgICAgICAgICAgdGhpcy5zdGFydCgpXG4gICAgfVxuICAgIGZvcm1hdEUoKXtcbiAgICAgICAgdGhpcy5pdGVtLmVhY2goZnVuY3Rpb24oayx0KXtcbiAgICAgICAgICAgICQodCkuYXR0cignc3VwZXJDb250cm9sLWl0ZW0nLGspO1xuICAgICAgICAgICAgJCh0KS5vbignY2xpY2snLGZ1bmN0aW9uKHQpe1xuICAgICAgICAgICAgICAgIHRoaXMuaXRlbS5hdHRyKFwic3VwZXJDb250cm9sLXRyaWdnZXJcIixmYWxzZSlcbiAgICAgICAgICAgICAgICAkKHQuY3VycmVudFRhcmdldCkuYXR0cihcInN1cGVyQ29udHJvbC10cmlnZ2VyXCIsdHJ1ZSlcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgIH1cbiAgICBzdGFydCgpe1xuICAgICAgICB0aGlzLmZvcm1hdEUoKVxuICAgIH1cbn1cbmNsYXNzIFJzbG9hZGVye1xuICAgIGNvbnN0cnVjdG9yKHRhcmdldCxiZz1cInRyYW5zcGFyZW50XCIsZmx1eD1mYWxzZSl7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gJCh0YXJnZXQpXG4gICAgICAgIHRoaXMuYmcgPSBiZ1xuICAgICAgICB0aGlzLmZsdXggPSBmbHV4XG4gICAgICAgIGlmKHRoaXMudGFyZ2V0KXtcbiAgICAgICAgICAgIHRoaXMuc3RhcnQoKVxuICAgICAgICB9XG4gICAgfVxuICAgIHN0YXJ0KCl7XG4gICAgICAgIHRoaXMuZmFjdG9yVGFyZ2V0KClcbiAgICB9XG4gICAgZmFjdG9yVGFyZ2V0KCl7XG4gICAgICAgIHRoaXMudGFyZ2V0LmNzcygncG9zaXRpb24nLCdyZWxhdGl2ZScpXG4gICAgfVxuICAgIGNyZWF0TG9hZGluZyh0YXJnZXQpe1xuICAgICAgICBjb25zb2xlLmxvZygndG90bycpO1xuICAgICAgICBpZih0aGlzLmZsdXgpIHtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZ2NvbnRlbnQgPSAnPGRpdiBjbGFzcz1cInByZWxvYWRlci1vYmplY3Qgb2JqLWxvYWRlclwiIHN0eWxlPVwicG9zaXRpb246IHN0YXRpYztiYWNrZ3JvdW5kLWNvbG9yOicrdGhpcy5iZysnIWltcG9ydGFudDtcIj48ZGl2IGNsYXNzPVwibG9hZGVyLWNvbnRlbnRcIj48c3ZnIHZlcnNpb249XCIxLjFcIiBjbGFzcz1cImhleGFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgeD1cIjBweFwiIHk9XCIwcHhcIiB3aWR0aD1cIjIwMHB4XCIgaGVpZ2h0PVwiMjI3LjdweFwiIHZpZXdCb3g9XCIwIDAgMjAwIDIyNy43XCIgc3R5bGU9XCJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDIwMCAyMjcuNztcIiB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiPjxnPjxwYXRoIGQ9XCJNMTAwLDBjLTEuOCwwLTMuNiwwLjUtNS4zLDEuNEw1LjMsNTNDMiw1NC45LDAsNTguNCwwLDYyLjJ2MTAzLjNjMCwzLjgsMiw3LjMsNS4zLDkuMmw4OS40LDUxLjZjMS42LDAuOSwzLjUsMS40LDUuMywxLjRzMy42LTAuNSw1LjMtMS40bDg5LjQtNTEuNmMzLjMtMS45LDUuMy01LjQsNS4zLTkuMlY2Mi4yYzAtMy44LTItNy4zLTUuMy05LjJMMTA1LjMsMS40QzEwMy42LDAuNSwxMDEuOCwwLDEwMCwwTDEwMCwwelwiPjwvcGF0aD48L2c+PC9zdmc+PHN2ZyB2ZXJzaW9uPVwiMS4xXCIgY2xhc3M9XCJoZXhhXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHg9XCIwcHhcIiB5PVwiMHB4XCIgd2lkdGg9XCIyMDBweFwiIGhlaWdodD1cIjIyNy43cHhcIiB2aWV3Qm94PVwiMCAwIDIwMCAyMjcuN1wiIHN0eWxlPVwiZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyMDAgMjI3Ljc7XCIgeG1sOnNwYWNlPVwicHJlc2VydmVcIj48Zz48cGF0aCBkPVwiTTEwMCwwYy0xLjgsMC0zLjYsMC41LTUuMywxLjRMNS4zLDUzQzIsNTQuOSwwLDU4LjQsMCw2Mi4ydjEwMy4zYzAsMy44LDIsNy4zLDUuMyw5LjJsODkuNCw1MS42YzEuNiwwLjksMy41LDEuNCw1LjMsMS40czMuNi0wLjUsNS4zLTEuNGw4OS40LTUxLjZjMy4zLTEuOSw1LjMtNS40LDUuMy05LjJWNjIuMmMwLTMuOC0yLTcuMy01LjMtOS4yTDEwNS4zLDEuNEMxMDMuNiwwLjUsMTAxLjgsMCwxMDAsMEwxMDAsMHpcIj48L3BhdGg+PC9nPjwvc3ZnPjxzdmcgdmVyc2lvbj1cIjEuMVwiIGNsYXNzPVwiaGV4YVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB4PVwiMHB4XCIgeT1cIjBweFwiIHdpZHRoPVwiMjAwcHhcIiBoZWlnaHQ9XCIyMjcuN3B4XCIgdmlld0JveD1cIjAgMCAyMDAgMjI3LjdcIiBzdHlsZT1cImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjAwIDIyNy43O1wiIHhtbDpzcGFjZT1cInByZXNlcnZlXCI+PGc+PHBhdGggZD1cIk0xMDAsMGMtMS44LDAtMy42LDAuNS01LjMsMS40TDUuMyw1M0MyLDU0LjksMCw1OC40LDAsNjIuMnYxMDMuM2MwLDMuOCwyLDcuMyw1LjMsOS4ybDg5LjQsNTEuNmMxLjYsMC45LDMuNSwxLjQsNS4zLDEuNHMzLjYtMC41LDUuMy0xLjRsODkuNC01MS42YzMuMy0xLjksNS4zLTUuNCw1LjMtOS4yVjYyLjJjMC0zLjgtMi03LjMtNS4zLTkuMkwxMDUuMywxLjRDMTAzLjYsMC41LDEwMS44LDAsMTAwLDBMMTAwLDB6XCI+PC9wYXRoPjwvZz48L3N2Zz48L2Rpdj48L2Rpdj4nXG5cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdjb250ZW50ID0gJzxkaXYgY2xhc3M9XCJwcmVsb2FkZXItb2JqZWN0IG9iai1sb2FkZXJcIiBzdHlsZT1cImJhY2tncm91bmQtY29sb3I6Jyt0aGlzLmJnKychaW1wb3J0YW50O1wiPjxkaXYgY2xhc3M9XCJsb2FkZXItY29udGVudFwiPjxzdmcgdmVyc2lvbj1cIjEuMVwiIGNsYXNzPVwiaGV4YVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiB4PVwiMHB4XCIgeT1cIjBweFwiIHdpZHRoPVwiMjAwcHhcIiBoZWlnaHQ9XCIyMjcuN3B4XCIgdmlld0JveD1cIjAgMCAyMDAgMjI3LjdcIiBzdHlsZT1cImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMjAwIDIyNy43O1wiIHhtbDpzcGFjZT1cInByZXNlcnZlXCI+PGc+PHBhdGggZD1cIk0xMDAsMGMtMS44LDAtMy42LDAuNS01LjMsMS40TDUuMyw1M0MyLDU0LjksMCw1OC40LDAsNjIuMnYxMDMuM2MwLDMuOCwyLDcuMyw1LjMsOS4ybDg5LjQsNTEuNmMxLjYsMC45LDMuNSwxLjQsNS4zLDEuNHMzLjYtMC41LDUuMy0xLjRsODkuNC01MS42YzMuMy0xLjksNS4zLTUuNCw1LjMtOS4yVjYyLjJjMC0zLjgtMi03LjMtNS4zLTkuMkwxMDUuMywxLjRDMTAzLjYsMC41LDEwMS44LDAsMTAwLDBMMTAwLDB6XCI+PC9wYXRoPjwvZz48L3N2Zz48c3ZnIHZlcnNpb249XCIxLjFcIiBjbGFzcz1cImhleGFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgeD1cIjBweFwiIHk9XCIwcHhcIiB3aWR0aD1cIjIwMHB4XCIgaGVpZ2h0PVwiMjI3LjdweFwiIHZpZXdCb3g9XCIwIDAgMjAwIDIyNy43XCIgc3R5bGU9XCJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDIwMCAyMjcuNztcIiB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiPjxnPjxwYXRoIGQ9XCJNMTAwLDBjLTEuOCwwLTMuNiwwLjUtNS4zLDEuNEw1LjMsNTNDMiw1NC45LDAsNTguNCwwLDYyLjJ2MTAzLjNjMCwzLjgsMiw3LjMsNS4zLDkuMmw4OS40LDUxLjZjMS42LDAuOSwzLjUsMS40LDUuMywxLjRzMy42LTAuNSw1LjMtMS40bDg5LjQtNTEuNmMzLjMtMS45LDUuMy01LjQsNS4zLTkuMlY2Mi4yYzAtMy44LTItNy4zLTUuMy05LjJMMTA1LjMsMS40QzEwMy42LDAuNSwxMDEuOCwwLDEwMCwwTDEwMCwwelwiPjwvcGF0aD48L2c+PC9zdmc+PHN2ZyB2ZXJzaW9uPVwiMS4xXCIgY2xhc3M9XCJoZXhhXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHhtbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiIHg9XCIwcHhcIiB5PVwiMHB4XCIgd2lkdGg9XCIyMDBweFwiIGhlaWdodD1cIjIyNy43cHhcIiB2aWV3Qm94PVwiMCAwIDIwMCAyMjcuN1wiIHN0eWxlPVwiZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyMDAgMjI3Ljc7XCIgeG1sOnNwYWNlPVwicHJlc2VydmVcIj48Zz48cGF0aCBkPVwiTTEwMCwwYy0xLjgsMC0zLjYsMC41LTUuMywxLjRMNS4zLDUzQzIsNTQuOSwwLDU4LjQsMCw2Mi4ydjEwMy4zYzAsMy44LDIsNy4zLDUuMyw5LjJsODkuNCw1MS42YzEuNiwwLjksMy41LDEuNCw1LjMsMS40czMuNi0wLjUsNS4zLTEuNGw4OS40LTUxLjZjMy4zLTEuOSw1LjMtNS40LDUuMy05LjJWNjIuMmMwLTMuOC0yLTcuMy01LjMtOS4yTDEwNS4zLDEuNEMxMDMuNiwwLjUsMTAxLjgsMCwxMDAsMEwxMDAsMHpcIj48L3BhdGg+PC9nPjwvc3ZnPjwvZGl2PjwvZGl2PidcbiAgICAgICAgfVxuICAgICAgICB0YXJnZXQuYXBwZW5kKHRoaXMubG9hZGluZ2NvbnRlbnQpXG4gICAgICAgIHRoaXMudGFyZ2V0LmF0dHIoJ2lzTG9hZGluZycsZmFsc2UpXG4gICAgfVxuICAgIHBsYXlsb2FkaW5nKCl7XG4gICAgICAgIHRoaXMuY3JlYXRMb2FkaW5nKHRoaXMudGFyZ2V0KVxuICAgICAgICB0aGlzLnRhcmdldC5hdHRyKCdpc0xvYWRpbmcnLHRydWUpXG4gICAgfVxuICAgIHN0b3Bsb2FkaW5nKCl7XG4gICAgICAgIHRoaXMudGFyZ2V0LmZpbmQoJy5wcmVsb2FkZXInKS5yZW1vdmUoKVxuICAgICAgICB0aGlzLnRhcmdldC5hdHRyKCdpc0xvYWRpbmcnLGZhbHNlKVxuICAgIH1cbn1cbmNsYXNzIHJzTG9hZGVyQnV0dG9ue1xuICAgIGNvbnN0cnVjdG9yKHNldHRpbmdzKXtcbiAgICAgICAgbGV0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgICBvblRyaWdnZXI6J2NsaWNrJyxcbiAgICAgICAgICAgIGNvbG9yOlwiI2ZmZlwiLFxuICAgICAgICAgICAgcHVsc2U6ZmFsc2UsXG4gICAgICAgICAgICBtYW51YWw6ZmFsc2UsXG4gICAgICAgICAgICBkbm9uZTpmYWxzZSxcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihvcHRpb25zLHNldHRpbmdzKVxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gb3B0aW9ucy50YXJnZXRcbiAgICAgICAgdGhpcy5jb2xvciA9IG9wdGlvbnMuY29sb3JcbiAgICAgICAgdGhpcy5wdWxzZSA9IG9wdGlvbnMucHVsc2VcbiAgICAgICAgdGhpcy5zcGlubmVyID0gJzxkaXYgZGF0YS1zcGlubmVyPVwidHJ1ZVwiIGNsYXNzPVwic3Bpbm5lciBkLWZsZXgganVzdGlmeS1jb250ZW50LWNlbnRlciBhbGlnbi1pdGVtcy1jZW50ZXIgbS0wXCIgc3R5bGU9XCJ3aWR0aDogMjBweDsgaGVpZ2h0OiAyNXB4O3JpZ2h0OiAwcHg7IGJvdHRvbTogMHB4O1wiPjxzcGFuIGNsYXNzPVwic3Bpbm5lci1jaXJjbGUgXCIgc3R5bGU9XCJ3aWR0aDogMjBweDtoZWlnaHQ6IDIwcHg7Ym9yZGVyLWNvbG9yOicrdGhpcy5jb2xvcisnO2JvcmRlci10b3AtY29sb3I6IHRyYW5zcGFyZW50O1wiPjwvc3Bhbj48L2Rpdj4nXG4gICAgICAgIHRoaXMub25UcmlnZ2VyID0gb3B0aW9ucy5vblRyaWdnZXJcbiAgICAgICAgdGhpcy52YWxpZGF0ZSA9IGZhbHNlXG4gICAgICAgIHRoaXMudG1wdGV4dD0gXCJcIlxuICAgICAgICB0aGlzLnRhcmdldGNsYXNzID0gJydcbiAgICAgICAgdGhpcy5tYW51YWwgPSBvcHRpb25zLm1hbnVhbFxuICAgICAgICB0aGlzLmRub25lPW9wdGlvbnMuZG5vbmVcbiAgICAgICAgdGhpcy5zdGFydCh0aGlzLm9uVHJpZ2dlcilcbiAgICB9XG4gICAgc3RhcnQob25UcmlnZ2VyKXtcbiAgICAgICAgdGhpcy5DcmVhdEV2ZW50KG9uVHJpZ2dlcilcbiAgICB9XG4gICAgQ3JlYXRFdmVudChvblRyaWdnZXIpe1xuICAgICAgICBjb25zdCBwdWxzZSA9IHRoaXMucHVsc2VcbiAgICAgICAgY29uc3Qgc3Bpbm5lciA9IHRoaXMuc3Bpbm5lclxuICAgICAgICBjb25zdCB2YWxpZGF0ZSA9IHRoaXMudmFsaWRhdGVcbiAgICAgICAgaWYodGhpcy5tYW51YWwgPT09IGZhbHNlKXtcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKHRoaXMub25UcmlnZ2VyLHRoaXMudGFyZ2V0LGZ1bmN0aW9uKHQpe1xuICAgICAgICAgICAgICAgIHZhciB0ID0gdC5jdXJyZW50VGFyZ2V0XG4gICAgICAgICAgICAgICAgdGhpcy50YXJnZXRjbGFzcyA9ICQodCkuYXR0cignY2xhc3MnKVxuICAgICAgICAgICAgICAgIGlmKHB1bHNlID09IHRydWUpe1xuICAgICAgICAgICAgICAgICAgICAkKHQpLmFkZENsYXNzKFwicHVsc2VcIilcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRtcHRleHQgPSAkKHQpLmh0bWwoKVxuICAgICAgICAgICAgICAgIHZhciBjb250ZW50dGV4dCA9ICc8c3BhbiBjbGFzcz1cImQtbm9uZSB0ZXh0XCI+Jyt0bXB0ZXh0Kyc8L3NwYW4+J1xuICAgICAgICAgICAgICAgICQodCkuaHRtbChzcGlubmVyKVxuICAgICAgICAgICAgICAgICQodCkuYXBwZW5kKGNvbnRlbnR0ZXh0KVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKVxuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZSgpe1xuICAgICAgICBjb25zdCBwdWxzZSA9IHRoaXMucHVsc2VcbiAgICAgICAgY29uc3Qgc3Bpbm5lciA9IHRoaXMuc3Bpbm5lclxuICAgICAgICBjb25zdCB2YWxpZGF0ZSA9IHRoaXMudmFsaWRhdGVcbiAgICAgICAgdGhpcy50YXJnZXRjbGFzcyA9ICQodGhpcy50YXJnZXQpLmF0dHIoJ2NsYXNzJylcbiAgICAgICAgaWYocHVsc2UgPT0gdHJ1ZSl7XG4gICAgICAgICAgICAkKHRoaXMudGFyZ2V0KS5hZGRDbGFzcyhcInB1bHNlXCIpXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHRtcHRleHQgPSAkKHRoaXMudGFyZ2V0KS5odG1sKClcbiAgICAgICAgdmFyIGNvbnRlbnR0ZXh0ID0gJzxzcGFuIGNsYXNzPVwiZC1ub25lIHRleHRcIj4nK3RtcHRleHQrJzwvc3Bhbj4nXG4gICAgICAgICQodGhpcy50YXJnZXQpLmh0bWwoc3Bpbm5lcilcbiAgICAgICAgJCh0aGlzLnRhcmdldCkuYXBwZW5kKGNvbnRlbnR0ZXh0KVxuICAgIH1cbiAgICBsb2FkdmFsaWRhdGUodCl7XG4gICAgICAgIHRoaXMudmFsaWRhdGUgPSB0XG4gICAgfVxuICAgIHN0b3BMb2FkKGFjdGlvbj1cImVycm9yXCIpe1xuICAgICAgICAkKHRoaXMudGFyZ2V0KS5maW5kKCcuc3Bpbm5lcicpLnJlbW92ZSgpXG4gICAgICAgICQodGhpcy50YXJnZXQpLmZpbmQoJy50ZXh0JykucmVtb3ZlQ2xhc3MoXCJkLW5vbmVcIikuYWRkQ2xhc3MoJ2QtYmxvY2snKVxuICAgICAgIGlmKGFjdGlvbiA9PT0gXCJkZWZhdWx0XCIpe1xuICAgICAgICAgICAkKHRoaXMudGFyZ2V0KS5hdHRyKCdjbGFzcycsdGhpcy50YXJnZXRjbGFzcylcbiAgICAgICB9XG4gICAgICAgIGlmKGFjdGlvbiA9PT0gXCJlcnJvclwiKXtcbiAgICAgICAgICAgICQodGhpcy50YXJnZXQpLmFkZENsYXNzKCdidG4tZGFuZ2VyJylcbiAgICAgICAgICAgICQodGhpcy50YXJnZXQpLmFkZENsYXNzKCdhbmltYXRlZCcpXG4gICAgICAgICAgICAkKHRoaXMudGFyZ2V0KS5hZGRDbGFzcygncnViYmVyQmFuZCcpXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgJCh0aGlzLnRhcmdldCkucmVtb3ZlQ2xhc3MoJ2J0bi1kYW5nZXInKVxuICAgICAgICAgICAgICAgICQodGhpcy50YXJnZXQpLnJlbW92ZUNsYXNzKCdhbmltYXRlZCcpXG4gICAgICAgICAgICAgICAgJCh0aGlzLnRhcmdldCkucmVtb3ZlQ2xhc3MoJ3J1YmJlckJhbmQnKVxuICAgICAgICAgICAgICAgICQodGhpcy50YXJnZXQpLmFkZENsYXNzKHRoaXMudGFyZ2V0Y2xhc3MpXG4gICAgICAgICAgICB9LmJpbmQodGhpcyksNzAwKVxuICAgICAgICB9XG4gICAgICAgIGlmKGFjdGlvbiA9PT0gXCJzdWNjZXNzXCIpe1xuICAgICAgICAgICAgJCh0aGlzLnRhcmdldCkuYWRkQ2xhc3MoJ2J0bi1zdWNjZXNzJylcbiAgICAgICAgICAgICQodGhpcy50YXJnZXQpLmFkZENsYXNzKCdhbmltYXRlZCcpXG4gICAgICAgICAgICAkKHRoaXMudGFyZ2V0KS5hZGRDbGFzcygnamVsbG8nKVxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICQodGhpcy50YXJnZXQpLnJlbW92ZUNsYXNzKCdidG4tc3VjY2VzcycpXG4gICAgICAgICAgICAgICAgJCh0aGlzLnRhcmdldCkucmVtb3ZlQ2xhc3MoJ2FuaW1hdGVkJylcbiAgICAgICAgICAgICAgICAkKHRoaXMudGFyZ2V0KS5yZW1vdmVDbGFzcygnamVsbG8nKVxuICAgICAgICAgICAgICAgICQodGhpcy50YXJnZXQpLmFkZENsYXNzKHRoaXMudGFyZ2V0Y2xhc3MpXG4gICAgICAgICAgICB9LmJpbmQodGhpcyksNzAwKVxuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5wdWxzZSA9PSB0cnVlKXtcbiAgICAgICAgICAgICQodGhpcy50YXJnZXQpLnJlbW92ZUNsYXNzKFwicHVsc2VcIilcbiAgICAgICAgfVxuICAgICAgICBpZih0aGlzLmRub25lID09PSB0cnVlKXtcbiAgICAgICAgICAgIC8vICQodGhpcy50YXJnZXQpLmNzcygnZGlzcGxheScsJ25vbmUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy90b2RvXG5jbGFzcyB0YWJsZVJvd1NwaW5uZXJ7XG4gICAgY29uc3RydWN0b3IodGFyZ2V0LGxpbmtzKSB7XG4gICAgICAgIHRoaXMuc3Bpbm5lciA9ICc8ZGl2IGNsYXNzPVwiY29udGVudC1zcGlubmVyXCI+PGRpdiBkYXRhLXNwaW5uZXI9XCJ0cnVlXCIgY2xhc3M9XCJzcGlubmVyIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlciBtLTBcIiBzdHlsZT1cIndpZHRoOiAyMHB4OyBoZWlnaHQ6IDI1cHg7cmlnaHQ6IDBweDsgYm90dG9tOiAwcHg7XCI+PHNwYW4gY2xhc3M9XCJzcGlubmVyLWNpcmNsZSBcIiBzdHlsZT1cIndpZHRoOiAyMHB4O2hlaWdodDogMjBweDtib3JkZXItY29sb3I6Jyt0aGlzLmNvbG9yKyc7Ym9yZGVyLXRvcC1jb2xvcjogdHJhbnNwYXJlbnQ7XCI+PC9zcGFuPjw8L2Rpdj4vZGl2PidcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXRcbiAgICAgICAgdGhpcy5saW5rcyA9IGxpbmtzXG5cbiAgICB9XG4gICAgY3JlYXRFdmVudCgpe1xuICAgICAgICB2YXIgbGlua3N0YXJnZXQgPSB0aGlzLnRhcmdldC5maW5kKGxpbmtzKVxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLGxpbmtzdGFyZ2V0LGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnb2snKTtcbiAgICAgICAgfSlcbiAgICB9XG59XG52YXIgdGFibGVHbG9iYWxSb3dTcGlubmVyID0gbmV3IHRhYmxlUm93U3Bpbm5lcignW2RhdGEtcHJvdmlkZT1cInJvd3NwaW5uZXJcIl0nLFsnJ10pXG5cbmNsYXNzIGlucHV0U3Bpbm5lcntcbiAgICBjb25zdHJ1Y3Rvcih0YXJnZXQsc2l6ZWg9MzUsc2l6ZXc9MzUpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMuc2l6ZWggPSBzaXplaDtcbiAgICAgICAgdGhpcy5zaXpldyA9IHNpemV3O1xuICAgICAgICB0aGlzLnNwaW5uZXIgPSAnPGRpdiBkYXRhLXNwaW5uZXI9XCJ0cnVlXCIgY2xhc3M9XCJzcGlubmVyIGQtbm9uZSBwb3NpdGlvbi1hYnNvbHV0ZSBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlciBtLTBcIiBzdHlsZT1cIndpZHRoOiAnK3RoaXMuc2l6ZXcrJ3B4OyBoZWlnaHQ6ICcrdGhpcy5zaXplaCsncHg7cmlnaHQ6IDBweDsgYm90dG9tOiAwcHg7XCI+PHNwYW4gY2xhc3M9XCJzcGlubmVyLWNpcmNsZSBcIiBzdHlsZT1cIndpZHRoOiAyMHB4O2hlaWdodDogMjBweDtib3JkZXItY29sb3I6Jyt0aGlzLmNvbG9yKyc7Ym9yZGVyLXRvcC1jb2xvcjogdHJhbnNwYXJlbnQ7XCI+PC9zcGFuPjwvZGl2PidcbiAgICAgICAgdGhpcy5wYXJlbnQgPSAgJCh0aGlzLnRhcmdldCkuY2xvc2VzdCgnZGl2JylcbiAgICAgICAgdGhpcy5jcmVhdGUoKVxuICAgIH1cblxuICAgIGNyZWF0ZSgpe1xuICAgICAgIHRoaXMucGFyZW50LmFkZENsYXNzKFwicG9zaXRpb24tcmVsYXRpdmVcIikuYXBwZW5kKHRoaXMuc3Bpbm5lcik7XG4gICAgICAgIHRoaXMuY2hlY2twYWRkaW5nKClcblxuICAgIH1cbiAgICBjaGVja3BhZGRpbmcoKXtcbiAgICAgICAgdGhpcy5wYXJlbnQuZmluZCgnLnNwaW5uZXInKS5jc3MoJ3JpZ2h0JyxwYXJzZUludCh0aGlzLnBhcmVudC5jc3MoJ3BhZGRpbmctcmlnaHQnKSkpXG4gICAgfVxuXG4gICAgc3RhcnRMb2FkaW5nKCl7XG4gICAgICAgIGlmKCF0aGlzLnBhcmVudC5maW5kKCcuc3Bpbm5lcicpLmhhc0NsYXNzKCdkLWZsZXgnKSApe1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZmluZCgnLnNwaW5uZXInKS5yZW1vdmVDbGFzcygnZC1ub25lJykuYWRkQ2xhc3MoJ2QtZmxleCcpXG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcExvYWRpbmcoKXtcbiAgICAgICAgaWYoIXRoaXMucGFyZW50LmZpbmQoJy5zcGlubmVyJykuaGFzQ2xhc3MoJ2Qtbm9uZScpICkge1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQuZmluZCgnLnNwaW5uZXInKS5yZW1vdmVDbGFzcygnZC1mbGV4JykuYWRkQ2xhc3MoJ2Qtbm9uZScpXG4gICAgICAgIH1cbiAgICB9XG5cbn1cbmNsYXNzIGlucHV0RXJyb3J7XG4gICAgY29uc3RydWN0b3IodGFyZ2V0LG1lc3NhZ2Upe1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSAkKHRoaXMudGFyZ2V0KS5jbG9zZXN0KCdkaXYnKVxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSAnPGRpdiBjbGFzcz1cImhlbHAtYmxvY2sgd2l0aC1lcnJvcnNcIj48dWwgY2xhc3M9XCJsaXN0LXVuc3R5bGVkXCI+PC91bD48L2Rpdj4nXG4gICAgICAgIHRoaXMuZm9ybWdyb3VwID0gdGhpcy5wYXJlbnQuY2xvc2VzdCgnLmZvcm0tZ3JvdXAnKVxuICAgICAgICB0aGlzLmNyZWF0ZSgpXG4gICAgICAgIHRoaXMuaGlkZSgpXG4gICAgfVxuICAgIGNyZWF0ZSgpe1xuICAgICAgICB0aGlzLnBhcmVudC5hcHBlbmQodGhpcy5jb250ZW50KVxuICAgICAgICB0aGlzLmFkZG1lc3NhZ2UoKVxuICAgIH1cbiAgICBmb3JtZ3JvdXBzdHlsZShib29sKXtcbiAgICAgICAgaWYoYm9vbCA9PT0gdHJ1ZSl7XG4gICAgICAgICAgICB0aGlzLmZvcm1ncm91cC5hZGRDbGFzcyhcImhhcy1lcnJvclwiKS5hZGRDbGFzcyhcImhhcy1kYW5nZXJcIilcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLmZvcm1ncm91cC5yZW1vdmVDbGFzcyhcImhhcy1lcnJvclwiKS5yZW1vdmVDbGFzcyhcImhhcy1kYW5nZXJcIilcblxuICAgICAgICB9XG4gICAgfVxuICAgIGFkZG1lc3NhZ2UoKXtcbiAgICAgICAgdGhpcy5wYXJlbnQuZmluZCgnLndpdGgtZXJyb3JzJykuZmluZCgnLmxpc3QtdW5zdHlsZWQnKS5hcHBlbmQoJzxsaT4nK3RoaXMubWVzc2FnZSsnPC9saT4nKVxuICAgIH1cblxuICAgIHNob3coKXtcbiAgICAgICAgdGhpcy5mb3JtZ3JvdXBzdHlsZSh0cnVlKVxuICAgICAgICBpZighdGhpcy5wYXJlbnQuZmluZCgnLndpdGgtZXJyb3JzJykuaGFzQ2xhc3MoJ2QtYmxvY2snKSl7XG4gICAgICAgICAgICB0aGlzLnBhcmVudC5maW5kKCcud2l0aC1lcnJvcnMnKS5yZW1vdmVDbGFzcyhcImQtbm9uZVwiKS5hZGRDbGFzcyhcImQtYmxvY2tcIilcbiAgICAgICAgfVxuICAgIH1cbiAgICBoaWRlKCl7XG4gICAgICAgIHRoaXMuZm9ybWdyb3Vwc3R5bGUoZmFsc2UpXG4gICAgICAgIGlmKCF0aGlzLnBhcmVudC5maW5kKCcud2l0aC1lcnJvcnMnKS5oYXNDbGFzcygnZC1ub25lJykpIHtcbiAgICAgICAgICAgIHRoaXMucGFyZW50LmZpbmQoJy53aXRoLWVycm9ycycpLnJlbW92ZUNsYXNzKFwiZC1ibG9ja1wiKS5hZGRDbGFzcyhcImQtbm9uZVwiKVxuICAgICAgICB9XG4gICAgfVxuXG59XG5cblxudmFyIHJzbG9hZGVyUHJvdmlkZUJ1dHRvbiA9ICBuZXcgcnNMb2FkZXJCdXR0b24oXG4gICAge1xuICAgICAgIHRhcmdldCA6XCJbZGF0YS1wcm92aWRlPSdidXR0b25sb2FkJ11cIixcbiAgICAgICAgLy9kZWZhdWx0IG9wdGlvblxuICAgICAgICAvLyAgICAgb25UcmlnZ2VyOidjbGljaycsXG4gICAgICAgIC8vICAgICBjb2xvcjpcIiNmZmZcIixcbiAgICAgICAgcHVsc2U6dHJ1ZSAvLy8gYW5pbWF0aW9uIGRlIHB1bHNlIGF1dG91ciBkdSBsYSBmb3JtZVxuICAgIH1cbilcblxudmFyIHJzbG9hZGVyUHJvdmlkZUJ1dHRvbnVwbG9hZCA9ICBuZXcgcnNMb2FkZXJCdXR0b24oXG4gICAge1xuICAgICAgICB0YXJnZXQgOlwiW2RhdGEtcHJvdmlkZT0nYnV0dG9ubG9hZHVwbG9hZCddXCIsXG4gICAgICAgIC8vZGVmYXVsdCBvcHRpb25cbiAgICAgICAgLy8gICAgIG9uVHJpZ2dlcjonY2xpY2snLFxuICAgICAgICAvLyAgICAgY29sb3I6XCIjZmZmXCIsXG4gICAgICAgIHB1bHNlOnRydWUsIC8vLyBhbmltYXRpb24gZGUgcHVsc2UgYXV0b3VyIGR1IGxhIGZvcm1lXG4gICAgICAgIG1hbnVhbDp0cnVlLFxuICAgICAgICBkbm9uZTp0cnVlXG4gICAgfVxuKVxuLy9cbi8vIHZhciBpbnN0YW5jZSA9IHtcbi8vICAgICAnI3RvdG8nIDoge1xuLy8gICAgICAgICAnc2VsZWN0MicgOiAvL2luc3RhbmNlLFxuLy8gICAgICAgICAnZGF0YXRhYmxlJyA6IC8vaW5zdGFuY2UsXG4vLyAgICAgfSxcbi8vICcubG9hZGVyJ1xuLy8gfVxuLy9cbi8vXG4vLyAvLy8gdG9kb1xuLy8gY2xhc3MgcnNQcm92aWRlTWFuYWdlcntcbi8vICAgICBjb25zdHJ1Y3RvcihhdXRvTGF1bmNoKXtcbi8vICAgICAgICAgdGhpcy5pbnN0YW5jZSA9IHt9XG4vLyAgICAgICAgIGlmKGF1dG9MYXVuY2gpXG4vLyAgICAgICAgICAgICB0aGlzLmNyZWF0ZUluc3RhbmNlRnJvbVByb3ZpZGUoKTtcbi8vICAgICB9XG4vLyAgICAgY2hlY2tQcm92aWRlKCl7XG4vLyAgICAgICAgICQodGhpcy50YXJnZXQpLmVhY2goZnVuY3Rpb24oayx0KXtcbi8vICAgICAgICAgICAgICQodCkuYXR0cih0aGlzLmluc3RhbmNlLGspXG4vLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhrLHQpO1xuLy8gICAgICAgICB9LmJpbmQodGhpcykpO1xuLy8gICAgIH1cbi8vXG4vLyAgICAgY3JlYXRlSW5zdGFuY2VGcm9tUHJvdmlkZSgpIHtcbi8vICAgICAgICAgJCgnI2RhdGEtcHJvdmlkZScpXG4vLyAgICAgfVxuLy9cbi8vICAgICBjcmVhdGVJbnN0YW5jZSh0YXJnZXQsIGxpYiwgb3B0aW9ucywgZm9yY2Upe1xuLy8gICAgICAgICAvLyBpZiBnZXRJbnN0YW5jZSgpID0+IHJldHVybiBnZXRJbnN0YW5jZSgpXG4vLyAgICAgICAgIC8vIGVsc2UgbmV3IC4uLlxuLy8gICAgIH1cbi8vXG4vLyAgICAgZ2V0SW5zdGFuY2UoKXtcbi8vXG4vLyAgICAgfVxuLy9cbi8vIH1cbi8vIHZhciByc1Byb3ZpZGUgPSBuZXcgcnNQcm92aWRlTWFuYWdlcih0cnVlKTtcbi8vIHJzUHJvdmlkZS5jcmVhdGVJbnN0YW5jZSgpXG5cblxuXG53aW5kb3cuY29sb3JzID0ge1xuICAgICdwcmltYXJ5JzogJyMzODk5ZWMnLFxuICAgICdzZWNvbmRhcnknOiAnIzM3NDM1MScsXG4gICAgJ3RoaXJkJzonI2Y5YmIzMCcsXG59XG5cblxuIl19
